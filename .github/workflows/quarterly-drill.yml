name: Quarterly DR Drill Reminder

on:
  schedule:
    - cron: '0 13 1 1,4,7,10 *'
  workflow_dispatch:

jobs:
  open-issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const title = `DR Fire Drill - ${new Date().toISOString().slice(0,10)}`;
            const body = `Quarterly DR drill: restore from noncurrent versions; rebuild manifests/indices; rotate CMEK; verify access.\n\nEnvironments: dev, stg.`;
            await github.rest.issues.create({ owner: context.repo.owner, repo: context.repo.repo, title, body, labels: ['type: todo', 'drill'] });
